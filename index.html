<!DOCTYPE html>
<html>
  <head>
  <title></title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
	<meta charset="utf-8">


	<!-- iPad/iPhone specific css below, add after your main css >
	<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
	<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />	
	-->
    <link rel="stylesheet" href="eric-theme.css" />
    <link rel="stylesheet" href="jquery.mobile.structure-1.1.0.css" />  
    <link rel="stylesheet" href="mystyle.css" />
    
	<!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
	<script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery-1.7.2.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery.mobile-1.1.0.js"></script>
    <script type="text/javascript">
        

	// If you want to prevent dragging, uncomment this section
	/*
	function preventBehavior(e) 
	{ 
      e.preventDefault(); 
    };
	document.addEventListener("touchmove", preventBehavior, false);
	*/
	
	/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
	see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
	for more details -jm */
	/*
	function handleOpenURL(url)
	{
		// TODO: do something with the url passed in.
	}
	*/       
   
        function onBodyLoad()
        {		
            document.addEventListener("deviceready", onDeviceReady, false);
        }
        
                /* When this function is called, Cordova has been initialized and is ready to roll */
	/* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
	see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
	for more details -jm */
        function onDeviceReady()
        {
            // do your thing!
            navigator.notification.alert("Cordova is working");
            
            $('#totwo').bind('click', function(event){
                             $.mobile.changePage("#two", {transition:"pop"});
                             });
            
            $('#mainform').bind('submit', function(event){
                                var name = $('#name').val();
                                navigator.notification.alert(name);
                                });
            
            $('#submit').bind('click', function(event){
                              var name = $('#name').val();
                              navigator.notification.alert(name);
                              });
            
            $('#add').bind('click', function(event){
                           navigator.notification.alert("Hello");
                           $('#list').append('<li data-theme="e"><a href="#">Volvo</a></li>');
                           document.getElementById("onecontent").listview('refresh');
                           });
        }
        
        $(document).bind('pageinit', function() {
                         $.get("http://24.7.2.229:8888/json.html",function(data){
                               var obj = eval('('+data+')');
                               $('#onecontent').append('<ul id="list" data-role="listview" data-inset="true" data-filter="true" data-theme="a"></ul>');
                               //alert(obj.restaraunts.length);
                               for(var i = 0; i < obj.restaraunts.length; i++)
                               {
                               var straunt = obj.restaraunts[i];
                               var imgFile = '';
                               if(straunt.dealClass == 'freeApp')
                               {
                               imgFile = 'images/fastfood.svg';
                               }
                               else
                               {
                               imgFile = 'images/dessert.svg';
                               }
                               $('#list').append('<li><a href="#"><img class="dealimg" src="'+imgFile+'"/>'+straunt.name+' - '+straunt.distance+'<p class="dealdesc">'+straunt.deal+'</p>Minimum Diners: '+straunt.minDiners+'</a></li>');
                               }
                               $('#list').listview();
                               });
                         });
        
        $(document).bind('click', function(event){
                         $('#list').append('<li><a href="#">Volvo</a></li>');
                         //var content = $("#onecontent");
                         $("#list").listview("refresh");
                         });

    </script>
  </head>
  <body onload="onBodyLoad()">
  <div id="one" data-role="page" data-theme="c">
      <div data-role="header" data-position="fixed">
          <h1>Deals</h1>
      </div>
      <div id="onecontent" data-role="content" data-theme="a">
          <!--<ul id="list" data-role="listview" data-inset="true" data-filter="true" data-theme="e">
              <li><a href="#">Acura</a></li>
              <li><a href="#">Audi</a></li>
              <li><a href="#">BMW</a></li>
              <li><a href="#">Cadillac</a></li>
              <li><a href="#">Ferrari</a></li>
          </ul>
          <a id="totwo" data-role="button" data-shadow="true" data-transition="fade" data-icon="star" data-theme="a">Button</a>
          <a id="add" data-role="button" data-rel="dialog" data-shadow="true" data-transition="fade" data-icon="star" data-theme="a">Button</a>-->
      </div>
      <div data-role="footer" data-position="fixed" data-theme="a">
          <div class="sortbutton" data-role="controlgroup" data-type="horizontal">
              <a href="#" data-role="button">Type</a>
              <a href="#" data-role="button">Dist</a>
              <a href="#" data-role="button">A-Z</a>
          </div>
      </div>
  </div>
      
      <div id="two" data-role="page">
          <div class="ui-bar ui-bar-b">
              <h1>Page 2</h1>
          </div>
          <div data-role="content" data-theme="e">
              <div class="rounded">
                  <form action="#two" id="mainform">
                      <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
                          <label for="name" class="ui-input-text">Name:</label>
                          <input type="text" name="name" id="name" value-class="ui-body-c ui-input-text ui-corner-all ui-shadow-inset">
                      </div>
                  </form>
                  <a href="#" id="submit" data-role="button" data-transition="pop" data-theme="b">Submit</a>
              </div>
          </div>
      </div>
      
      <div id="popup" data-role="dialog">
          <div class="ui-bar ui-bar-e">
              <h1>Dialog</h1>
          </div>
          <div data-role="content">
              <p>Dialog</p>
              <a href="#one" data-role="button">Close</a>
          </div>
      </div>
          
  </body>
</html>
